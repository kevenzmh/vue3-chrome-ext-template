(function(){var t={3852:function(t,e,a){a(4114),console.log("Google Ads 广告组修改器 Background Script 已启动");class o{constructor(){this.init()}init(){chrome.runtime.onInstalled.addListener(()=>{this.initializeConfig()}),chrome.runtime.onMessage.addListener((t,e,a)=>(this.handleMessage(t,e,a),!0))}async initializeConfig(){try{const t=await chrome.storage.local.get(["adsConfig"]);if(!t.adsConfig){const t=this.getDefaultConfig();await chrome.storage.local.set({adsConfig:t}),console.log("已初始化默认配置")}}catch(t){console.error("初始化配置失败:",t)}}getDefaultConfig(){return{adGroups:[{match:{name:"示例广告组1"},modifications:{name:"新的广告组名称1",status:"enabled",bidStrategy:{type:"manual_cpc",value:2.5}}},{match:{namePattern:"测试.*"},modifications:{status:"paused",bidStrategy:{type:"target_cpa",value:15}}},{match:{name:"移动端广告组"},modifications:{name:"移动端广告组-优化版",status:"enabled",bidStrategy:{type:"maximize_clicks",dailyBudget:100}}}],settings:{modificationDelay:1e3,verbose:!0,backup:!0,maxRetries:3},selectors:{adGroupTable:'[data-testid="ad-groups-table"], .ad-groups-table, table[aria-label*="广告组"], table[aria-label*="Ad group"]',adGroupRow:'tr[data-testid*="ad-group"], tr.ad-group-row, tbody tr',adGroupName:'[data-testid="ad-group-name"], .ad-group-name, td:first-child a, td:first-child span',statusColumn:'[data-testid="status"], .status-column, td[data-field="status"]',bidColumn:'[data-testid="bid"], .bid-column, td[data-field="bid"]',editButton:'[data-testid="edit"], .edit-button, button[aria-label*="编辑"], button[aria-label*="Edit"]',saveButton:'[data-testid="save"], .save-button, button[aria-label*="保存"], button[aria-label*="Save"]'}}}async handleMessage(t,e,a){try{switch(t.action){case"getConfig":const e=await this.getConfig();a({success:!0,config:e});break;case"updateConfig":await this.updateConfig(t.config),a({success:!0});break;case"resetConfig":await this.resetConfig(),a({success:!0});break;case"logModification":this.logModification(t.data),a({success:!0});break;default:a({success:!1,error:"未知操作"})}}catch(o){console.error("处理消息时出错:",o),a({success:!1,error:o.message})}}async getConfig(){const t=await chrome.storage.local.get(["adsConfig"]);return t.adsConfig||this.getDefaultConfig()}async updateConfig(t){await chrome.storage.local.set({adsConfig:t}),console.log("配置已更新")}async resetConfig(){const t=this.getDefaultConfig();await chrome.storage.local.set({adsConfig:t}),console.log("配置已重置为默认值")}logModification(t){console.log("广告组修改记录:",{timestamp:(new Date).toISOString(),...t}),this.saveModificationLog(t)}async saveModificationLog(t){try{const e=await chrome.storage.local.get(["modificationLogs"]),a=e.modificationLogs||[];a.push({timestamp:(new Date).toISOString(),...t}),a.length>100&&a.splice(0,a.length-100),await chrome.storage.local.set({modificationLogs:a})}catch(e){console.error("保存修改日志失败:",e)}}}new o}},e={};function a(o){var i=e[o];if(void 0!==i)return i.exports;var n=e[o]={exports:{}};return t[o].call(n.exports,n,n.exports,a),n.exports}a.m=t,function(){var t=[];a.O=function(e,o,i,n){if(!o){var s=1/0;for(u=0;u<t.length;u++){o=t[u][0],i=t[u][1],n=t[u][2];for(var r=!0,c=0;c<o.length;c++)(!1&n||s>=n)&&Object.keys(a.O).every(function(t){return a.O[t](o[c])})?o.splice(c--,1):(r=!1,n<s&&(s=n));if(r){t.splice(u--,1);var l=i();void 0!==l&&(e=l)}}return e}n=n||0;for(var u=t.length;u>0&&t[u-1][2]>n;u--)t[u]=t[u-1];t[u]=[o,i,n]}}(),function(){a.d=function(t,e){for(var o in e)a.o(e,o)&&!a.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){a.j=471}(),function(){var t={471:0};a.O.j=function(e){return 0===t[e]};var e=function(e,o){var i,n,s=o[0],r=o[1],c=o[2],l=0;if(s.some(function(e){return 0!==t[e]})){for(i in r)a.o(r,i)&&(a.m[i]=r[i]);if(c)var u=c(a)}for(e&&e(o);l<s.length;l++)n=s[l],a.o(t,n)&&t[n]&&t[n][0](),t[n]=0;return a.O(u)},o=self["webpackChunkvue3_chrome_ext_template"]=self["webpackChunkvue3_chrome_ext_template"]||[];o.forEach(e.bind(null,0)),o.push=e.bind(null,o.push.bind(o))}();var o=a.O(void 0,[504],function(){return a(3852)});o=a.O(o)})();
//# sourceMappingURL=background.js.map