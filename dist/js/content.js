(function(){console.log("[Google Ads Modifier] Content Script å·²åŠ è½½");class e{constructor(){this.config=null,this.isInjected=!1,this.init()}async init(){console.log("[Google Ads Modifier] åˆå§‹åŒ–ä¸­..."),"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>this.setup()):await this.setup()}async setup(){window.location.href.includes("ads.google.com")?(console.log("[Google Ads Modifier] æ£€æµ‹åˆ° Google Ads é¡µé¢"),await this.loadConfig(),this.injectInterceptorScript(),chrome.runtime.onMessage.addListener((e,o,t)=>(this.handleMessage(e,o,t),!0)),this.showStatusBanner(),console.log("[Google Ads Modifier] åˆå§‹åŒ–å®Œæˆ")):console.log("[Google Ads Modifier] ä¸åœ¨ Google Ads é¡µé¢ï¼Œè·³è¿‡")}async loadConfig(){try{const e=await chrome.storage.local.get(["adsConfig"]);e.adsConfig?this.config=e.adsConfig:(this.config=await this.loadDefaultConfig(),await chrome.storage.local.set({adsConfig:this.config})),console.log("[Google Ads Modifier] é…ç½®åŠ è½½å®Œæˆ:",this.config)}catch(e){console.error("[Google Ads Modifier] åŠ è½½é…ç½®å¤±è´¥:",e),this.config=this.getDefaultConfig()}}async loadDefaultConfig(){return this.getDefaultConfig()}getDefaultConfig(){return{adGroups:[{match:{name:"ç¤ºä¾‹å¹¿å‘Šç»„1"},displayData:{impressions:"125680",clicks:"8432",conversions:"156",cost:"2345.67",ctr:"6.70%",cpc:"0.28",conversionRate:"1.85%",cpa:"15.04"}},{match:{namePattern:"/æµ‹è¯•å¹¿å‘Šç»„.*/"},displayData:{impressions:"89234",clicks:"5678",conversions:"89",cost:"1567.89",ctr:"6.36%",cpc:"0.28",conversionRate:"1.57%",cpa:"17.62"}}],globalData:{impressions:"50000",clicks:"3000",conversions:"60",cost:"840.00",ctr:"6.00%",cpc:"0.28",conversionRate:"2.00%",cpa:"14.00"},settings:{verbose:!0,enableGlobalData:!1,autoUpdate:!0}}}injectInterceptorScript(){if(this.isInjected)console.log("[Google Ads Modifier] æ‹¦æˆªè„šæœ¬å·²æ³¨å…¥ï¼Œè·³è¿‡");else try{const e=chrome.runtime.getURL("js/inject-script.js"),o=document.createElement("script");o.src=e,o.type="text/javascript",o.onload=()=>{console.log("[Google Ads Modifier] æ‹¦æˆªè„šæœ¬æ³¨å…¥æˆåŠŸ"),this.isInjected=!0,this.updateInterceptorConfig()},o.onerror=e=>{console.error("[Google Ads Modifier] æ‹¦æˆªè„šæœ¬æ³¨å…¥å¤±è´¥:",e)},(document.head||document.documentElement).appendChild(o)}catch(e){console.error("[Google Ads Modifier] æ³¨å…¥è„šæœ¬æ—¶å‡ºé”™:",e)}}updateInterceptorConfig(){try{window.postMessage({type:"UPDATE_INTERCEPTOR_CONFIG",config:this.config},"*"),console.log("[Google Ads Modifier] é…ç½®å·²å‘é€åˆ°æ‹¦æˆªå™¨")}catch(e){console.error("[Google Ads Modifier] å‘é€é…ç½®å¤±è´¥:",e)}}handleMessage(e,o,t){switch(console.log("[Google Ads Modifier] æ”¶åˆ°æ¶ˆæ¯:",e),e.action){case"startModification":this.startModification().then(()=>{t({success:!0,message:"æ‹¦æˆªå™¨å·²æ¿€æ´»ï¼Œæ­£åœ¨ä¿®æ”¹ç½‘ç»œå“åº”æ•°æ®"})}).catch(e=>{t({success:!1,error:e.message})});break;case"updateConfig":this.updateConfig(e.config).then(()=>{t({success:!0,message:"é…ç½®å·²æ›´æ–°"})}).catch(e=>{t({success:!1,error:e.message})});break;case"getStatus":t({success:!0,status:{isInjected:this.isInjected,config:this.config}});break;default:t({success:!1,error:"æœªçŸ¥æ“ä½œ"})}}async startModification(){console.log("[Google Ads Modifier] æ¿€æ´»ç½‘ç»œæ‹¦æˆª..."),this.isInjected?this.updateInterceptorConfig():this.injectInterceptorScript(),this.config.settings.autoUpdate&&console.log("[Google Ads Modifier] å»ºè®®åˆ·æ–°é¡µé¢ä»¥å®Œå…¨åº”ç”¨æ‹¦æˆª")}async updateConfig(e){this.config=e,await chrome.storage.local.set({adsConfig:e}),this.updateInterceptorConfig(),console.log("[Google Ads Modifier] é…ç½®å·²æ›´æ–°å¹¶åŒæ­¥")}showStatusBanner(){const e=document.createElement("div");e.id="google-ads-modifier-banner",e.innerHTML='\n      <div style="display: flex; align-items: center; gap: 8px;">\n        <span style="font-weight: bold;">ğŸ”§ Google Ads æ•°æ®ä¿®æ”¹å™¨</span>\n        <span>ç½‘ç»œæ‹¦æˆªå·²æ¿€æ´»</span>\n      </div>\n    ',e.style.cssText="\n      position: fixed;\n      top: 0;\n      left: 0;\n      right: 0;\n      z-index: 999999;\n      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n      color: white;\n      padding: 8px 16px;\n      font-size: 13px;\n      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n      box-shadow: 0 2px 8px rgba(0,0,0,0.15);\n      animation: slideDown 0.3s ease-out;\n    ";const o=document.createElement("style");o.textContent="\n      @keyframes slideDown {\n        from {\n          transform: translateY(-100%);\n          opacity: 0;\n        }\n        to {\n          transform: translateY(0);\n          opacity: 1;\n        }\n      }\n    ",document.head.appendChild(o),document.body.appendChild(e),setTimeout(()=>{e.style.transition="opacity 0.5s, transform 0.5s",e.style.opacity="0",e.style.transform="translateY(-100%)",setTimeout(()=>e.remove(),500)},5e3)}}const o=new e;window.googleAdsInterceptor=o})();
//# sourceMappingURL=content.js.map