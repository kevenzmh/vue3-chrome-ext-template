(function(){var e={3841:function(e,t,o){o(8111),o(116),o(7588),o(1701),o(3579),o(3110),console.log("Google Ads 数据展示修改器已加载");const s=document.createElement("div");s.textContent="Google Ads 内容脚本已加载",s.style.position="fixed",s.style.top="0",s.style.left="0",s.style.zIndex="999999",s.style.background="red",s.style.color="white",s.style.padding="4px 8px",s.style.fontSize="12px",document.documentElement.appendChild(s);class n{constructor(){this.config=null,this.isProcessing=!1,this.modifiedCount=0,this.originalData=new Map,this.autoRefreshTimer=null,this.isReady=!1,this.init()}injectNetworkHook(){try{const e=document.createElement("script");e.type="text/javascript",e.textContent="("+function(){try{const e=window.fetch;if(!e)return void console.warn("页面中未检测到 fetch，跳过网络 hook");if(window.__googleAdsFetchHookInstalled)return;window.__googleAdsFetchHookInstalled=!0,window.fetch=async function(){const t=Array.prototype.slice.call(arguments),o=t[0],s=await e.apply(this,t);try{if("string"===typeof o&&-1!==o.indexOf("ads.google.com")){const e=s.clone(),t=e.headers&&e.headers.get&&e.headers.get("content-type")||"";if(-1!==t.indexOf("application/json")){const t=await e.json();try{Array.isArray(t.rows)&&t.rows.forEach(function(e){e&&e.metrics&&null!=e.metrics.impressions&&(e.metrics.impressions=999999)})}catch(n){console.error("修改 Google Ads 接口数据时出错",n)}const o=JSON.stringify(t);return new Response(o,{status:s.status,statusText:s.statusText,headers:s.headers})}}}catch(n){console.error("Google Ads fetch hook 处理出错",n)}return s},console.log("Google Ads fetch hook 已注入")}catch(e){console.error("注入 Google Ads fetch hook 失败",e)}}+")();",document.documentElement.appendChild(e),e.parentNode&&e.parentNode.removeChild(e)}catch(e){console.error("注入网络 hook 脚本失败",e)}}async init(){"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>this.setup()):this.setup()}async setup(){window.location.href.includes("ads.google.com")&&(console.log("检测到Google Ads页面，初始化数据修改器..."),this.injectNetworkHook(),await this.loadConfig(),chrome.runtime.onMessage.addListener((e,t,o)=>(console.log("收到消息:",e),"startModification"===e.action?(console.log("开始执行数据修改..."),this.startDataModification().then(()=>{o({success:!0,message:"数据修改完成"})}).catch(e=>{console.error("数据修改失败:",e),o({success:!1,error:e.message})}),!0):(o({success:!1,error:"未知操作"}),!0))),this.observePageChanges(),this.config&&this.config.settings.autoRefresh&&this.startAutoRefresh())}async loadConfig(){try{const e=await chrome.storage.local.get(["adsConfig"]);e.adsConfig?this.config=e.adsConfig:(this.config=this.getDefaultConfig(),await chrome.storage.local.set({adsConfig:this.config})),console.log("配置加载完成:",this.config)}catch(e){console.error("加载配置失败:",e),this.config=this.getDefaultConfig()}}getDefaultConfig(){return{adGroups:[{match:{name:"示例广告组1"},displayData:{impressions:"125,680",clicks:"8,432",conversions:"156",cost:"¥2,345.67",ctr:"6.70%",cpc:"¥0.28",conversionRate:"1.85%",cpa:"¥15.04"}}],globalData:{impressions:"50,000",clicks:"3,000",conversions:"60",cost:"¥840.00",ctr:"6.00%",cpc:"¥0.28",conversionRate:"2.00%",cpa:"¥14.00"},settings:{modificationDelay:500,verbose:!0,enableGlobalData:!1,autoRefresh:!0,refreshInterval:5e3},selectors:{adGroupTable:'table[aria-label*="广告组"], table[aria-label*="Ad group"], .data-table, [role="table"]',adGroupRow:'tbody tr, [role="row"]',adGroupName:'td:first-child a, td:first-child span, [data-column="name"]'}}}async startDataModification(){if(this.isProcessing)console.log("数据修改正在进行中，请稍候...");else{this.isProcessing=!0,this.modifiedCount=0,console.log("开始修改广告组显示数据...");try{await this.findAndModifyDisplayData(),console.log(`数据修改完成，共修改了 ${this.modifiedCount} 个广告组的显示数据`)}catch(e){console.error("修改过程中出现错误:",e)}finally{this.isProcessing=!1}}}async findAndModifyDisplayData(){await this.waitForElement(this.config.selectors.adGroupTable);const e=document.querySelectorAll(this.config.selectors.adGroupTable);if(0===e.length)throw new Error("未找到广告组表格");for(const t of e){const e=t.querySelectorAll(this.config.selectors.adGroupRow);console.log(`在表格中找到 ${e.length} 个广告组行`);for(const t of e)await this.processAdGroupDisplayData(t),await this.delay(this.config.settings.modificationDelay)}}async processAdGroupDisplayData(e){try{const t=e.querySelector(this.config.selectors.adGroupName);if(!t)return;const o=t.textContent.trim();if(!o||""===o)return;console.log(`处理广告组: ${o}`),this.originalData.has(o)||this.backupOriginalData(e,o);const s=this.findMatchingConfig(o);let n=null;s?(n=s.displayData,console.log(`找到匹配配置，使用自定义数据: ${o}`)):this.config.settings.enableGlobalData&&(n=this.config.globalData,console.log(`使用全局数据: ${o}`)),n&&(await this.modifyRowDisplayData(e,n),this.modifiedCount++)}catch(t){console.error("处理广告组行时出错:",t)}}findMatchingConfig(e){return this.config.adGroups.find(t=>{if(t.match.name)return t.match.name===e;if(t.match.namePattern){const o=new RegExp(t.match.namePattern);return o.test(e)}return!1})}async modifyRowDisplayData(e,t){const o=e.querySelectorAll("td");o.forEach((e,o)=>{const s=e.textContent.trim().toLowerCase();this.isImpressionsCell(e,s,o)?this.updateCellContent(e,t.impressions):this.isClicksCell(e,s,o)?this.updateCellContent(e,t.clicks):this.isConversionsCell(e,s,o)?this.updateCellContent(e,t.conversions):this.isCostCell(e,s,o)?this.updateCellContent(e,t.cost):this.isCtrCell(e,s,o)?this.updateCellContent(e,t.ctr):this.isCpcCell(e,s,o)?this.updateCellContent(e,t.cpc):this.isConversionRateCell(e,s,o)?this.updateCellContent(e,t.conversionRate):this.isCpaCell(e,s,o)&&this.updateCellContent(e,t.cpa)})}isImpressionsCell(e,t,o){return t.includes("展示")||t.includes("impression")||/^\d{1,3}(,\d{3})*$/.test(t)&&o>=2&&o<=4}isClicksCell(e,t,o){return t.includes("点击")||t.includes("click")||/^\d{1,3}(,\d{3})*$/.test(t)&&o>=3&&o<=5}isConversionsCell(e,t,o){return t.includes("转化")||t.includes("conversion")||/^\d{1,3}(,\d{3})*$/.test(t)&&o>=4&&o<=6}isCostCell(e,t,o){return t.includes("费用")||t.includes("cost")||t.includes("¥")||t.includes("$")}isCtrCell(e,t,o){return t.includes("点击率")||t.includes("ctr")||t.includes("%")&&t.length<=6}isCpcCell(e,t,o){return t.includes("每次点击")||t.includes("cpc")||(t.includes("¥")||t.includes("$"))&&t.length<=10}isConversionRateCell(e,t,o){return t.includes("转化率")||t.includes("conv")&&t.includes("%")}isCpaCell(e,t,o){return t.includes("每次转化")||t.includes("cpa")||(t.includes("¥")||t.includes("$"))&&t.length<=15}updateCellContent(e,t){if(!t)return;const o=e.querySelector("span, div, input")||e;"INPUT"===o.tagName?(o.value=t,o.dispatchEvent(new Event("input",{bubbles:!0}))):o.textContent=t,e.style.backgroundColor="#e8f5e8",e.style.border="1px solid #4caf50",e.title="数据已被插件修改"}backupOriginalData(e,t){const o=e.querySelectorAll("td"),s=Array.from(o).map(e=>e.textContent.trim());this.originalData.set(t,{data:s,timestamp:(new Date).toISOString()}),this.config.settings.verbose&&console.log(`备份原始数据: ${t}`,s)}startAutoRefresh(){this.autoRefreshTimer&&clearInterval(this.autoRefreshTimer),this.autoRefreshTimer=setInterval(()=>{this.isProcessing||(console.log("自动刷新数据..."),this.startDataModification())},this.config.settings.refreshInterval)}stopAutoRefresh(){this.autoRefreshTimer&&(clearInterval(this.autoRefreshTimer),this.autoRefreshTimer=null)}observePageChanges(){const e=new MutationObserver(e=>{e.forEach(e=>{if("childList"===e.type&&e.addedNodes.length>0){const t=Array.from(e.addedNodes).some(e=>1===e.nodeType&&e.querySelector&&e.querySelector(this.config.selectors.adGroupTable));t&&!this.isProcessing&&(console.log("检测到新的广告组表格，自动修改数据"),setTimeout(()=>this.startDataModification(),1e3))}})});e.observe(document.body,{childList:!0,subtree:!0})}async waitForElement(e,t=1e4){return new Promise((o,s)=>{const n=document.querySelector(e);if(n)return void o(n);const i=new MutationObserver(()=>{const t=document.querySelector(e);t&&(i.disconnect(),o(t))});i.observe(document.body,{childList:!0,subtree:!0}),setTimeout(()=>{i.disconnect(),s(new Error(`等待元素超时: ${e}`))},t)})}delay(e){return new Promise(t=>setTimeout(t,e))}}new n;window.adsModifierLoaded=!0,console.log("Google Ads 数据修改器初始化完成")}},t={};function o(s){var n=t[s];if(void 0!==n)return n.exports;var i=t[s]={exports:{}};return e[s].call(i.exports,i,i.exports,o),i.exports}o.m=e,function(){var e=[];o.O=function(t,s,n,i){if(!s){var r=1/0;for(d=0;d<e.length;d++){s=e[d][0],n=e[d][1],i=e[d][2];for(var a=!0,c=0;c<s.length;c++)(!1&i||r>=i)&&Object.keys(o.O).every(function(e){return o.O[e](s[c])})?s.splice(c--,1):(a=!1,i<r&&(r=i));if(a){e.splice(d--,1);var l=n();void 0!==l&&(t=l)}}return t}i=i||0;for(var d=e.length;d>0&&e[d-1][2]>i;d--)e[d]=e[d-1];e[d]=[s,n,i]}}(),function(){o.d=function(e,t){for(var s in t)o.o(t,s)&&!o.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){o.j=854}(),function(){var e={854:0};o.O.j=function(t){return 0===e[t]};var t=function(t,s){var n,i,r=s[0],a=s[1],c=s[2],l=0;if(r.some(function(t){return 0!==e[t]})){for(n in a)o.o(a,n)&&(o.m[n]=a[n]);if(c)var d=c(o)}for(t&&t(s);l<r.length;l++)i=r[l],o.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return o.O(d)},s=self["webpackChunkvue3_chrome_ext_template"]=self["webpackChunkvue3_chrome_ext_template"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var s=o.O(void 0,[504],function(){return o(3841)});s=o.O(s)})();
//# sourceMappingURL=content.js.map